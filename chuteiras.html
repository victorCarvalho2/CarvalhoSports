<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/chuteiras.css" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <title>Carvalho Sport's - Chuteiras</title>
</head>

<body>
  <header>
    Carvalho Sport's
    <nav>
      <a id="pagina_inicial" href="inicial.html">Página Inicial</a>
      <a class="chuteiras" href="chuteiras.html">Chuteiras</a>
      <a class="camisas" href="camisas.html">Camisas de Time</a>
      <a class="material" href="material.html">Material Esportivo</a>
      <a class="tenis" href="tenis.html">Tênis Esportivos</a>
      <a class="sair" href="index.php">Sair</a>
    </nav>
  </header>
    
  <section class="texto">
    <h2>Na Carvalho Sport's, temos:</h2>
    <h3>Todos os tipos de chuteiras que você precisar.</h3>
  </section>

  <!-- Produto 1 -->
  <section>
    <div>
      <img id="nike_azul" src="img/newChuteiras/chuteira azul/naike.jpg" alt="" />
      <img class="nike_azul" src="img/newChuteiras/chuteira azul/naike.jpg" alt="" />
      <img class="nike_azul" src="img/newChuteiras/chuteira azul/naike.jpg" alt="" />
      <img class="nike_azul" src="img/newChuteiras/chuteira azul/naike.jpg" alt="" />
      <img class="nike_azul" src="img/newChuteiras/chuteira azul/naike.jpg" alt="" />
    </div>
    <h2>Chuteira Nike Phantom GT2 Elite</h2>
    <h3>Disponivel por: R$ 997,49</h3>
    <button class="comprar" data-nome="Nike Phantom GT2 Elite" data-preco="997.49">Adicionar ao Carrinho</button>
  </section>

  <!-- Produto 2 -->
  <section>
    <div>
      <img id="nike_preta" src="img/newChuteiras/chuteira preta/brack.jpg" alt="">
      <img class="nike_preta" src="img/newChuteiras/chuteira preta/brack.jpg" alt="">
      <img class="nike_preta" src="img/newChuteiras/chuteira preta/brack.jpg" alt="">
      <img class="nike_preta" src="img/newChuteiras/chuteira preta/brack.jpg" alt="">
      <img class="nike_preta" src="img/newChuteiras/chuteira preta/brack.jpg" alt="">
    </div>
    <h2>Chuteira Nike Zoom Mercurial Superfly 9 Elite XXV</h2>
    <h3>Disponivel por apenas: <br> R$ 533,99</h3>
    <button class="comprar" data-nome="Nike Zoom Mercurial Superfly 9 Elite XXV" data-preco="533.99">Adicionar ao
      Carrinho</button>
  </section>

  <!-- Produto 3 rosa-->
  <section>
    <div>
      <img id="nike_rosa" src="img/newChuteiras/chuteira rosa/pik.jpg" alt="Chuteira Nike Phantom GX Academy" />
      <img class="nike_rosa" src="img/newChuteiras/chuteira rosa/pik.jpg" alt="Chuteira Nike Phantom GX Academy" />
      <img class="nike_rosa" src="img/newChuteiras/chuteira rosa/pik.jpg" alt="Chuteira Nike Phantom GX Academy" />
      <img class="nike_rosa" src="img/newChuteiras/chuteira rosa/pik.jpg" alt="Chuteira Nike Phantom GX Academy" />
      <img class="nike_rosa" src="img/newChuteiras/chuteira rosa/pik.jpg" alt="Chuteira Nike Phantom GX Academy" />
    </div>
    <h2>Chuteira Nike Phantom GX Academy</h2>
    <h3>Disponivel por apenas: <br>R$ 631,99</h3>
    <button class="comprar" data-nome="Nike Phantom GX Academy" data-preco="631.99">Adicionar ao Carrinho</button>
  </section>

  <!-- Produto 4 verde -->
  <section>
    <div class="galeria">
      <img id="nike_verde" src="img/newChuteiras/chuteira verde/green.jpg" alt="Chuteira Nike Tiempo Legend" />
      <img class="nike_verde" src="img/newChuteiras/chuteira verde/green.jpg" alt="Chuteira Nike Tiempo Legend" />
      <img class="nike_verde" src="img/newChuteiras/chuteira verde/green.jpg" alt="Chuteira Nike Tiempo Legend" />
      <img class="nike_verde" src="img/newChuteiras/chuteira verde/green.jpg" alt="Chuteira Nike Tiempo Legend" />
      <img class="nike_verde" src="img/newChuteiras/chuteira verde/green.jpg" alt="Chuteira Nike Tiempo Legend" />
    </div>
    <h2>Chuteira Nike Tiempo Legend 10 Elite</h2>
    <h3>Disponivel por apenas: <br>R$ 489,99</h3>
    <button class="comprar" data-nome="Nike Tiempo Legend 10 Elite" data-preco="489.99">Adicionar ao Carrinho</button>
  </section>
  </main>

  <!-- SSSSSSSSSSSCCCCCCCCCCCCCCCCCCRRRRRRRRRRRRRRRRIIIIIIIIIIIIIIIIIIIIIPPPPPPPPPPPPPPPTTTTTTTTTTTTTTTTTT'S -->


  <!-- Carrinho -->
  <div class="carrinho">
    <h3>Carrinho de Compras</h3>
    <ul id="itensCarrinho">
      <!-- Itens adicionados ao carrinho aparecerão aqui -->
    </ul>
    <p class="total">Total: R$ 0,00</p>
    <button id="finalizarCompra">Finalizar Compra</button>
    <div id="qrcode" style="margin-top: 20px;"></div>
  </div>

  <script>
    // Array para armazenar os itens do carrinho
    let carrinho = [];

    // Função para atualizar a exibição do carrinho
    function atualizarCarrinho() {
      const carrinhoUl = document.getElementById("itensCarrinho");
      const total = document.querySelector(".total");
      carrinhoUl.innerHTML = '';

      let totalCarrinho = 0;

      // Exibe cada item no carrinho
      carrinho.forEach((item, index) => {
        const li = document.createElement("li");
        li.innerHTML = `${item.nome} - R$ ${item.preco.toFixed(2)} <button onclick="removerItem(${index})">Remover</button>`;
        carrinhoUl.appendChild(li);
        totalCarrinho += item.preco;
      });

      total.innerHTML = `Total: R$ ${totalCarrinho.toFixed(2)}`;
    }

    // Função para adicionar item ao carrinho
    function adicionarCarrinho(event) {
      const nome = event.target.getAttribute("data-nome");
      const preco = parseFloat(event.target.getAttribute("data-preco"));

      carrinho.push({ nome, preco });
      atualizarCarrinho();
      alert(`✅ "${nome}" foi adicionado ao carrinho!`);

    }

    // Função para remover item do carrinho
    function removerItem(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    // Evento para adicionar produtos ao carrinho
    document.querySelectorAll(".comprar").forEach(button => {
      button.addEventListener("click", adicionarCarrinho);
    });

    // Finalizar compra (pode adicionar lógica de pagamento)
    document.getElementById("finalizarCompra").addEventListener("click", () => {
      if (carrinho.length > 0) {
        alert("Compra finalizada com sucesso!");
        carrinho = [];
        atualizarCarrinho();
      } else {
        alert("Seu carrinho está vazio.");
      }
    });

    document.getElementById("finalizarCompra").addEventListener("click", () => {
      // Recupera os itens do carrinho armazenados no localStorage
      const itensCarrinho = JSON.parse(localStorage.getItem("carrinho")) || [];

      // Calcula o total da compra
      const valorTotal = itensCarrinho.reduce((acc, item) => acc + (item.preco * item.quantidade), 0);

      // Envia os dados para o PHP
      fetch("finalizar.php", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          itens: itensCarrinho,
          total: valorTotal
        })
      })
        .then(res => res.json())
        .then(res => {
          if (res.status === "sucesso") {
            alert("Pedido realizado com sucesso!");
            // Limpa o carrinho após finalizar a compra
            localStorage.removeItem("carrinho");
            location.reload();
          } else {
            alert("Erro ao salvar pedido: " + res.mensagem);
          }
        })
        .catch(error => {
          alert("Erro ao processar a compra: " + error);
        });
    });
  </script>


</body>

</html>