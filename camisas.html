<!DOCTYPE html>
<html lang="pt-">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carvalho Sport's</title>
    <link rel="stylesheet" href="css/camisas.css">
    <link rel="shortcut icon" href="" type="image/x-icon">
</head>

<body>
    <header>
        Carvalho Sport's
        <!-- Navegação -->
        <nav>
            <a href="inicial.html">Página Inicial</a>
            <a href="chuteiras.html">Chuteiras</a>
            <a href="camisas.html">Camisas de Time</a>
            <a href="material.html">Material Esportivo</a>
            <a href="tenis.html">Tênis Esportivos</a>
            <a href="index.php">Sair</a>
        </nav>
    </header>
    <!-- Conteúdo principal -->
    <section>

        <h2>Na Carvalho Sport's, temos:</h2>
        <h3>Todas as Camisas de Time que você precisar.</h3>

    </section>
    <!-- <main> -->
    <!-- Camisa Botafogo -->
    <section>
        <div>
            <img src="img/Camisas/botafogo.png" alt="Camisa Botafogo" />
            <img src="img/Camisas/botafogo.png" alt="Camisa Botafogo" />
            <img src="img/Camisas/botafogo.png" alt="Camisa Botafogo" />
            <img src="img/Camisas/botafogo.png" alt="Camisa Botafogo" />
            <img src="img/Camisas/botafogo.png" alt="Camisa Botafogo" />
        </div>
        <h2>Camisa Botafogo I 23/24</h2>
        <h3>Disponível por <br> R$ 369,90.</h3>
        <button class="comprar" data-nome="Camisa do Botafogo" data-preco="369.90">Adicionar ao Carrinho</button>
    </section>

    <!-- Camisa Internacional -->
    <section>
        <div>
            <img src="img/Camisas/camisa.jpg" alt="Camisa Internacional" />
            <img src="img/Camisas/camisa.jpg" alt="Camisa Internacional" />
            <img src="img/Camisas/camisa.jpg" alt="Camisa Internacional" />
            <img src="img/Camisas/camisa.jpg" alt="Camisa Internacional" />
            <img src="img/Camisas/camisa.jpg" alt="Camisa Internacional" />
        </div>
        <h2>Camisa Internacional I 2023/2024</h2>
        <h3>Disponível por <br> R$ 349,99.</h3>
        <button class="comprar" data-nome="Camisa Internacional" data-preco="349.99">Adicionar ao Carrinho</button>
    </section>

    <!-- Camisa Palmeiras -->
    <section>
        <div>
            <img src="img/Camisas/camisaPalmeiras.webp" alt="Camisa Palmeiras" />
            <img src="img/Camisas/camisaPalmeiras.webp" alt="Camisa Palmeiras" />
            <img src="img/Camisas/camisaPalmeiras.webp" alt="Camisa Palmeiras" />
            <img src="img/Camisas/camisaPalmeiras.webp" alt="Camisa Palmeiras" />
            <img src="img/Camisas/camisaPalmeiras.webp" alt="Camisa Palmeiras" />
        </div>
        <h2>Camisa Palmeiras I 2023/2024</h2>
        <h3>Disponível por <br> R$ 349,99.</h3>
        <button class="comprar" data-nome="Camisa Palmeiras" data-preco="349.99">Adicionar ao Carrinho</button>
    </section>

    <!-- Camisa Vasco -->
    <section>
        <div>
            <img src="img/Camisas/camisaVasco.webp" alt="Camisa Vasco" />
            <img src="img/Camisas/camisaVasco.webp" alt="Camisa Vasco" />
            <img src="img/Camisas/camisaVasco.webp" alt="Camisa Vasco" />
            <img src="img/Camisas/camisaVasco.webp" alt="Camisa Vasco" />
            <img src="img/Camisas/camisaVasco.webp" alt="Camisa Vasco" />
        </div>
        <h2>Camisa Vasco II 2023/2024</h2>
        <h3>Disponível por <br> R$ 249,99.</h3>
        <button class="comprar" data-nome="Camisa Vasco II " data-preco="249.99">Adicionar ao Carrinho</button>
    </section>

    <!-- Camisa São Paulo -->
    <section>
        <div>
            <img src="img/Camisas/camisaSp.webp" alt="Camisa São Paulo" />
            <img src="img/Camisas/camisaSp.webp" alt="Camisa São Paulo" />
            <img src="img/Camisas/camisaSp.webp" alt="Camisa São Paulo" />
            <img src="img/Camisas/camisaSp.webp" alt="Camisa São Paulo" />
            <img src="img/Camisas/camisaSp.webp" alt="Camisa São Paulo" />
        </div>
        <h2>Camisa São Paulo I 2023/2024</h2>
        <h3>Disponível por <br> R$ 349,99.</h3>
        <button class="comprar" data-nome="Camisa São Paulo" data-preco="489.99">Adicionar ao Carrinho</button>
    </section>

    <!-- SSSSSSSSSSSCCCCCCCCCCCCCCCCCCRRRRRRRRRRRRRRRRIIIIIIIIIIIIIIIIIIIIIPPPPPPPPPPPPPPPTTTTTTTTTTTTTTTTTT'S -->


    <!-- Carrinho -->
    <div class="carrinho">
        <h3>Carrinho de Compras</h3>
        <ul id="itensCarrinho">
            <!-- Itens adicionados ao carrinho aparecerão aqui -->
        </ul>
        <p class="total">Total: R$ 0,00</p>
        <button id="finalizarCompra">Finalizar Compra</button>
    </div>


    <script>
        // Array para armazenar os itens do carrinho
        let carrinho = [];

        // Função para atualizar a exibição do carrinho
        function atualizarCarrinho() {
            const carrinhoUl = document.getElementById("itensCarrinho");
            const total = document.querySelector(".total");
            carrinhoUl.innerHTML = '';

            let totalCarrinho = 0;

            // Exibe cada item no carrinho
            carrinho.forEach((item, index) => {
                const li = document.createElement("li");
                li.innerHTML = `${item.nome} - R$ ${item.preco.toFixed(2)} <button onclick="removerItem(${index})">Remover</button>`;
                carrinhoUl.appendChild(li);
                totalCarrinho += item.preco;
            });

            total.innerHTML = `Total: R$ ${totalCarrinho.toFixed(2)}`;
        }

        // Função para adicionar item ao carrinho
        function adicionarCarrinho(event) {
            const nome = event.target.getAttribute("data-nome");
            const preco = parseFloat(event.target.getAttribute("data-preco"));

            carrinho.push({ nome, preco });
            atualizarCarrinho();
            alert(`✅ "${nome}" foi adicionado ao carrinho!`);
        }

        // Função para remover item do carrinho
        function removerItem(index) {
            carrinho.splice(index, 1);
            atualizarCarrinho();
        }

        // Evento para adicionar produtos ao carrinho
        document.querySelectorAll(".comprar").forEach(button => {
            button.addEventListener("click", adicionarCarrinho);
        });

        // Finalizar compra (pode adicionar lógica de pagamento)
        document.getElementById("finalizarCompra").addEventListener("click", () => {
            if (carrinho.length > 0) {
                alert("Compra finalizada com sucesso!");
                carrinho = [];
                atualizarCarrinho();
            } else {
                alert("Seu carrinho está vazio.");
            }
        });




        document.getElementById("finalizarCompra").addEventListener("click", () => {
            // Recupera os itens do carrinho armazenados no localStorage
            const itensCarrinho = JSON.parse(localStorage.getItem("carrinho")) || [];

            // Calcula o total da compra
            const valorTotal = itensCarrinho.reduce((acc, item) => acc + (item.preco * item.quantidade), 0);

            // Envia os dados para o PHP
            fetch("finalizar.php", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    itens: itensCarrinho,
                    total: valorTotal
                })
            })
                .then(res => res.json())
                .then(res => {
                    if (res.status === "sucesso") {
                        alert("Pedido realizado com sucesso!");
                        // Limpa o carrinho após finalizar a compra
                        localStorage.removeItem("carrinho");
                        location.reload();
                    } else {
                        alert("Erro ao salvar pedido: " + res.mensagem);
                    }
                })
                .catch(error => {
                    alert("Erro ao processar a compra: " + error);
                });
        });
    </script>

</body>

</html>